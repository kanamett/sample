<!DOCTYPE HTML>
<html>
<head>
<title>PhoneGap Showcase</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8"/>
<link rel="stylesheet" href="jquery.mobile-1.0.min.css" type="text/css" media="all">
<link rel="stylesheet" href="jquery.mobile.structure-1.0.min.css" type="text/css" media="all">
<STYLE type="text/css">
<!--
-->
</STYLE>
</head>
<body>
    <div data-role="page">
        <div data-role="header">
            <h1>Accelerometer Showcase</h1>
        </div>
        <div data-role="content">
            <a id="accelerometer_watch" href="#" data-role="button">計測開始</a>
            <div style="width:100%;height:150px;text-align:center;">
                <div id="accelerometer_watch_word" style="line-height:150px;font-size:100px; "></div>
            </div>
            <div id="accelerometer_watch_status"></div>
            <a id="accelerometer_clear" href="#" data-role="button">計測終了</a>
        </div>
    </div>
</body>
<script type="text/javascript" charset="utf-8" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.mobile-1.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
<script type="text/javascript">
$(function(){
    document.addEventListener("deviceready",
        function(){
            $('#accelerometer_watch').attr('href', 'javascript:watchStartAccelerometer()');
            $('#accelerometer_clear').attr('href', 'javascript:watchStopAccelerometer()');
        },        false);
})
/*
 * 加速度センサー計測開始
 */
var _accelerometer;
function watchStartAccelerometer(){
     _accelerometer = navigator.accelerometer.watchAcceleration(
        function(acceleration){
            // accelerometerSuccess
            $('#accelerometer_watch_status').html(
                      'x:' + acceleration.x + "<br>" +
                      'y:' + acceleration.y + "<br>" +
                      'z:' + acceleration.z + "<br>" +
                      '日付:' + new Date(acceleration.timestamp).toString());
           
            if(Math.abs(acceleration.x)>9){
                $('#accelerometer_watch_word').html("横")
            }else if(Math.abs(acceleration.y)>9){
                $('#accelerometer_watch_word').html("縦")
            }else if(Math.abs(acceleration.z)>9){
                $('#accelerometer_watch_word').html("水平")
            }else{
                 $('#accelerometer_watch_word').html("")
            }
        },
        function(){
            // accelerometerError
            alert('加速度センサーで内部エラーが発生しました');
        },
        {
            frequency : 1000,
        }
    );
}
/*
 * 加速度センサー計測終了
 */
function watchStopAccelerometer(){
     navigator.accelerometer.clearWatch(_accelerometer);
     $('#accelerometer_watch_status').html('');
     $('#accelerometer_watch_word').html('');
}
</script>
</html>
